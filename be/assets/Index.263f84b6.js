import{e as b,f as X,q as Y,o as z,c as D}from"./vendor.b3082d65.js";function E(e,n){const{text:c,radius:r,color:a,size:g,gap:u,textX:v,textY:y,fontSize:p,speed:w}=n,t=e.getContext("2d"),h=e.width,f=e.height;var l=[];let d=Date.now();const P=5e3/h;function x(s,i,o){this.dest={x:s,y:i},this.r=g,this.x=s,this.y=0,this.vx=0,this.vy=Math.random()*w,this.accX=0,this.accY=0,this.friction=.93,this.color=a,this.activeTime=o}x.prototype.render=function(){this.activeTime>d||(this.accX=(this.dest.x-this.x)/500,this.accY=(this.dest.y-this.y)/500,this.vx+=this.accX,this.vy+=this.accY,this.vx*=this.friction,this.vy*=this.friction,this.x+=this.vx,this.y+=this.vy,t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.r,Math.PI*2,!1),t.fill())};function T(){t.clearRect(0,0,e.width,e.height),t.font=`${p}px sans-serif`,t.fillText(c,v,y+p);var s=t.getImageData(0,0,h,f).data;t.clearRect(0,0,h,f),t.globalCompositeOperation="screen",l=[];for(var i=0;i<h;i+=u)for(var o=0;o<f;o+=u)s[(i+o*h)*4+3]>150&&l.push(new x(i,o,_(i)));console.info(`\u7C92\u5B50\u6570 ${l.length}`)}function _(s){return d+s*P}function m(s){requestAnimationFrame(m),t.clearRect(0,0,e.width,e.height),d=Date.now(),l.map(i=>i.render())}return{init:function(){T(),requestAnimationFrame(m)}}}const I=b({props:{width:{type:Number,default:500},height:{type:Number,default:300},text:{type:String,default:"Hello World"}},setup(e){const n=e,c=X(null);return Y(()=>{const r=c.value;if(r){r.width=n.width,r.height=n.height;var a=E(r,{text:n.text,color:"#000000",fontSize:36,radius:50,textX:24,textY:n.height-42,size:1,gap:1,speed:5});a.init()}}),(r,a)=>(z(),D("canvas",{ref_key:"canvasEl",ref:c},null,512))}});export{I as _};
